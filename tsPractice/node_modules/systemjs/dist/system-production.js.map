{"version":3,"sources":["../node_modules/es-module-loader/core/common.js","../node_modules/es-module-loader/core/resolve.js","../node_modules/es-module-loader/core/loader-polyfill.js","../node_modules/es-module-loader/core/register-loader.js","../src/common.js","../src/format-helpers.js","../src/systemjs-production-loader.js","../src/system-production.js"],"names":["isBrowser","window","document","isNode","process","versions","node","isWindows","platform","match","envGlobal","self","global","hasSymbol","Symbol","baseURI","createSymbol","name","getElementsByTagName","bases","href","location","split","slashIndex","lastIndexOf","substr","cwd","TypeError","replace","length","errArgs","Error","fileName","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","err","message","lineNumber","stack","originalErr","throwResolveError","relUrl","parentUrl","RangeError","resolveIfNotPlain","trim","parentProtocol","indexOf","firstChar","secondChar","pathname","parentIsPlain","undefined","segmented","output","segmentIndex","i","pop","push","substring","join","resolvedPromise","Promise","resolve","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","next","value","done","Loader","this","registry","Registry","ensureInstantiated","module","ModuleNamespace","prototype","constructor","import","key","parent","loader","then","RESOLVE_INSTANTIATE","catch","addToError","RESOLVE","resolveInstantiate","ensureResolution","resolvedKey","resolved","get","iteratorSupport","REGISTRY","entries","map","set","namespace","has","hasOwnProperty","call","delete","BASE_OBJECT","baseObject","defineProperty","forEach","extendNamespace","enumerable","create","toStringTag","REGISTER_INTERNAL","RegisterLoader","registryDelete","deleted","records","linkRecord","lastRegister","trace","INSTANTIATE","instantiate","createLoadRecord","state","registration","importerSetters","loadError","evalError","instantiatePromise","dependencies","execute","executingRequire","moduleObj","setters","depsInstantiatePromise","dependencyInstantiations","parentKey","load","reject","link","createProcessAnonRegister","instantiation","traceLoad","default","__useDefault","registerDeclarative","resolveInstantiateDep","traceDepMap","loads","deps","dynamicDeps","depMap","declare","definedExports","declared","changed","p","ContextualLoader","exports","instantiateDeps","depsInstantiatePromises","Array","all","setter","deepInstantiateDeps","seen","loadCnt","queueLoad","processLoad","depLoad","id","meta","url","ensureEvaluate","doEvaluate","makeDynamicRequire","depLink","declarativeExecute","configurable","require","dynamicExecute","moduleDefault","__esModule","processAnonRegister","instantiated","register","registerDynamic","nullContext","e","freeze","noop","emptyModule","hasStringTag","isModule","m","toString","CONFIG","PLAIN_RESOLVE","PLAIN_RESOLVE_SYNC","isWorker","importScripts","extend","a","b","supportsPreload","supportsPrefetch","windowOrigin","preloadScript","createElement","rel","as","head","appendChild","Image","src","workerImport","relList","supports","onerror","msg","apply","arguments","scriptLoad","crossOrigin","integrity","script","cleanup","error","removeEventListener","removeChild","type","charset","async","addEventListener","applyPaths","baseURL","paths","mapMatch","getMapMatch","target","checkMap","curLen","len","bestMatch","setAmdHelper","names","callback","errback","referer","splice","normalized","decanonicalize","dynamicRequires","modules","define","factory","requireIndex","exportsIndex","moduleIndex","req","depValues","uri","config","contextualRequire","toUrl","normalizeSync","curRequire","curMetaDeps","concat","amdGetCJSDeps","lastNamedDefine","multipleNamedDefines","curEsModule","wrapEsModuleExecute","amd","amdDefine","amdRequire","protocol","hostname","port","commentRegEx","ignoredGlobalProps","globalIterator","globalName","cjsRequirePre","cjsRequirePost","fnBracketRegEx","wsRegEx","requireRegExs","source","requireAlias","requireRegEx","RegExp","lastIndex","exec","registerLastDefine","SystemJSProductionLoader","submap","depCache","plainResolve","plainResolveSync","systemJSPrototype","globalSnapshot","instantiateWasm","response","WebAssembly","compileStreaming","importObj","Module","imports","_export","Instance","doScriptLoad","registered","retrieveGlobal","doEvalLoad","singleGlobal","globalValue","multipleExports","coreInstantiate","wasm","fetch","res","ok","status","statusText","headers","text","newModule","bindings","resolveSync","cfg","val","v","resolvedParent","getConfig","version","System","SystemJS"],"mappings":"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","sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  var slashIndex = baseURI.lastIndexOf('/');\n  if (slashIndex !== -1)\n    baseURI = baseURI.substr(0, slashIndex + 1);\n}\nelse if (typeof process !== 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError (relUrl, parentUrl) {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  relUrl = relUrl.trim();\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n      relUrl.length === 1  && (relUrl += '/')) ||\n      firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = -1;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== -1) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substring(segmentIndex, i + 1));\n          segmentIndex = -1;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== -1)\n      output.push(segmented.substr(segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace, REGISTRY }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { Loader, ModuleNamespace, REGISTRY } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, caching load and eval errors separately\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  var registryDelete = this.registry.delete;\n  this.registry.delete = function (key) {\n    var deleted = registryDelete.call(this, key);\n\n    // also delete from register registry if linked\n    if (records.hasOwnProperty(key) && !records[key].linkRecord) {\n      delete records[key];\n      deleted = true;\n    }\n\n    return deleted;\n  };\n\n  var records = {};\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: records\n  };\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    loadError: undefined,\n    evalError: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = this.registry[REGISTRY];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    var link = instantiated.linkRecord;\n\n    // if already beaten to done, return\n    if (!link) {\n      if (instantiated.module)\n        return instantiated.module;\n      throw instantiated.evalError;\n    }\n\n    return deepInstantiateDeps(loader, instantiated, link, registry, state)\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, link, registry, state, undefined);\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  }\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = link.moduleObj.__useDefault = {};\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    load.linkRecord = undefined;\n    throw load.loadError = load.loadError || addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = resolvedKey;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    if (load && load.loadError)\n      throw load.loadError;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    dynamicDeps: [],\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var definedExports = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    if (typeof name === 'object') {\n      var changed = false;\n      for (var p in name) {\n        value = name[p];\n        if (p !== '__useDefault' && (!(p in moduleObj) || moduleObj[p] !== value)) {\n          changed = true;\n          moduleObj[p] = value;\n        }\n      }\n      if (changed === false)\n        return value;\n    }\n    else {\n      if ((definedExports || name in moduleObj) && moduleObj[name] === value)\n        return value;\n      moduleObj[name] = value;\n    }\n\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports) {\n    link.moduleObj = moduleObj = declared.exports;\n    definedExports = true;\n  }\n}\n\nfunction instantiateDeps (loader, load, link, registry, state) {\n  if (link.depsInstantiatePromise)\n    return link.depsInstantiatePromise;\n\n  var depsInstantiatePromises = Array(link.dependencies.length);\n\n  for (var i = 0; i < link.dependencies.length; i++)\n    depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && link.depMap || (link.depMap = {}));\n\n  var depsInstantiatePromise = Promise.all(depsInstantiatePromises)\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            if (instantiation.loadError)\n              throw instantiation.loadError;\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n\n    return load;\n  });\n\n  if (loader.trace)\n    depsInstantiatePromise = depsInstantiatePromise.then(function () {\n      traceLoad(loader, load, link);\n      return load;\n    });\n\n  depsInstantiatePromise = depsInstantiatePromise.catch(function (err) {\n    // throw up the instantiateDeps stack\n    link.depsInstantiatePromise = undefined;\n    throw addToError(err, 'Loading ' + load.key);\n  });\n\n  depsInstantiatePromise.catch(function () {});\n\n  return link.depsInstantiatePromise = depsInstantiatePromise;\n}\n\nfunction deepInstantiateDeps (loader, load, link, registry, state) {\n  return new Promise(function (resolve, reject) {\n    var seen = [];\n    var loadCnt = 0;\n    function queueLoad (load) {\n      var link = load.linkRecord;\n      if (!link)\n        return;\n\n      if (seen.indexOf(load) !== -1)\n        return;\n      seen.push(load);\n\n      loadCnt++;\n      instantiateDeps(loader, load, link, registry, state)\n      .then(processLoad, reject);\n    }\n    function processLoad (load) {\n      loadCnt--;\n      var link = load.linkRecord;\n      if (link) {\n        for (var i = 0; i < link.dependencies.length; i++) {\n          var depLoad = link.dependencyInstantiations[i];\n          if (!(depLoad instanceof ModuleNamespace))\n            queueLoad(depLoad);\n        }\n      }\n      if (loadCnt === 0)\n        resolve();\n    }\n    queueLoad(load);\n  });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id, .key\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n  this.meta = {\n    url: key\n    // scriptElement: null\n  };\n}\n/*ContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};*/\nContextualLoader.prototype.import = function (key) {\n  if (this.loader.trace)\n    this.loader.loads[this.key].dynamicDeps.push(key);\n  return this.loader.import(key, this.key);\n};\n/*ContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};*/\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (load.evalError)\n    throw load.evalError;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err)\n    throw err;\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return '__useDefault' in module ? module.__useDefault : module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLoad.evalError)\n          err = depLoad.evalError;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err) {\n        load.linkRecord = undefined;\n        load.evalError = addToError(err, 'Evaluating ' + load.key);\n        return load.evalError;\n      }\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = moduleObj.__useDefault = exports;\n        },\n        get: function () {\n          return moduleObj.__useDefault;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.__useDefault)\n        moduleObj.default = moduleObj.__useDefault = module.exports;\n\n      var moduleDefault = moduleObj.default;\n\n      // __esModule flag extension support via lifting\n      if (moduleDefault && moduleDefault.__esModule) {\n        for (var p in moduleDefault) {\n          if (Object.hasOwnProperty.call(moduleDefault, p))\n            moduleObj[p] = moduleDefault[p];\n        }\n      }\n    }\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n\n  if (err)\n    return load.evalError = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","import { resolveIfNotPlain } from 'es-module-loader/core/resolve.js';\r\nimport { baseURI, isBrowser, isWindows, addToError, global, createSymbol } from 'es-module-loader/core/common.js';\r\nimport RegisterLoader from 'es-module-loader/core/register-loader.js';\r\nimport { ModuleNamespace } from 'es-module-loader/core/loader-polyfill.js';\r\n\r\nexport { baseURI, isBrowser, isWindows, addToError, global, resolveIfNotPlain, ModuleNamespace }\r\n\r\nexport var resolvedPromise = Promise.resolve();\r\nexport function noop () {};\r\n\r\nexport var emptyModule = new ModuleNamespace({});\r\n\r\nexport function protectedCreateNamespace (bindings) {\r\n  if (bindings instanceof ModuleNamespace)\r\n    return bindings;\r\n\r\n  if (bindings && bindings.__esModule)\r\n    return new ModuleNamespace(bindings);\r\n\r\n  return new ModuleNamespace({ default: bindings, __useDefault: bindings });\r\n}\r\n\r\nvar hasStringTag;\r\nexport function isModule (m) {\r\n  if (hasStringTag === undefined)\r\n    hasStringTag = typeof Symbol !== 'undefined' && !!Symbol.toStringTag;\r\n  return m instanceof ModuleNamespace || hasStringTag && Object.prototype.toString.call(m) == '[object Module]';\r\n}\r\n\r\nexport var CONFIG = createSymbol('loader-config');\r\nexport var METADATA = createSymbol('metadata');\r\nexport var PLAIN_RESOLVE = createSymbol('plain-resolve');\r\nexport var PLAIN_RESOLVE_SYNC = createSymbol('plain-resolve-sync');\r\n\r\nexport var isWorker = typeof window === 'undefined' && typeof self !== 'undefined' && typeof importScripts !== 'undefined';\r\n\r\nexport function warn (msg, force) {\r\n  if (force || this.warnings && typeof console !== 'undefined' && console.warn)\r\n    console.warn(msg);\r\n}\r\n\r\nexport function checkInstantiateWasm (loader, wasmBuffer, processAnonRegister) {\r\n  var bytes = new Uint8Array(wasmBuffer);\r\n\r\n  // detect by leading bytes\r\n  // Can be (new Uint32Array(fetched))[0] === 0x6D736100 when working in Node\r\n  if (bytes[0] === 0 && bytes[1] === 97 && bytes[2] === 115) {\r\n    return WebAssembly.compile(wasmBuffer).then(function (m) {\r\n      var deps = [];\r\n      var setters = [];\r\n      var importObj = {};\r\n\r\n      // we can only set imports if supported (eg Safari doesnt support)\r\n      if (WebAssembly.Module.imports)\r\n        WebAssembly.Module.imports(m).forEach(function (i) {\r\n          var key = i.module;\r\n          setters.push(function (m) {\r\n            importObj[key] = m;\r\n          });\r\n          if (deps.indexOf(key) === -1)\r\n            deps.push(key);\r\n        });\r\n      loader.register(deps, function (_export) {\r\n        return {\r\n          setters: setters,\r\n          execute: function () {\r\n            _export(new WebAssembly.Instance(m, importObj).exports);\r\n          }\r\n        };\r\n      });\r\n      processAnonRegister();\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  return Promise.resolve(false);\r\n}\r\n\r\nvar parentModuleContext;\r\nexport function loadNodeModule (key, baseURL) {\r\n  if (key[0] === '.')\r\n    throw new Error('Node module ' + key + ' can\\'t be loaded as it is not a package require.');\r\n\r\n  if (!parentModuleContext) {\r\n    var Module = this._nodeRequire('module');\r\n    var base = decodeURI(baseURL.substr(isWindows ? 8 : 7));\r\n    parentModuleContext = new Module(base);\r\n    parentModuleContext.paths = Module._nodeModulePaths(base);\r\n  }\r\n  return parentModuleContext.require(key);\r\n}\r\n\r\nexport function extend (a, b) {\r\n  for (var p in b) {\r\n    if (!Object.hasOwnProperty.call(b, p))\r\n      continue;\r\n    a[p] = b[p];\r\n  }\r\n  return a;\r\n}\r\n\r\nexport function prepend (a, b) {\r\n  for (var p in b) {\r\n    if (!Object.hasOwnProperty.call(b, p))\r\n      continue;\r\n    if (a[p] === undefined)\r\n      a[p] = b[p];\r\n  }\r\n  return a;\r\n}\r\n\r\n// meta first-level extends where:\r\n// array + array appends\r\n// object + object extends\r\n// other properties replace\r\nexport function extendMeta (a, b, _prepend) {\r\n  for (var p in b) {\r\n    if (!Object.hasOwnProperty.call(b, p))\r\n      continue;\r\n    var val = b[p];\r\n    if (a[p] === undefined)\r\n      a[p] = val;\r\n    else if (val instanceof Array && a[p] instanceof Array)\r\n      a[p] = [].concat(_prepend ? val : a[p]).concat(_prepend ? a[p] : val);\r\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\r\n      a[p] = (_prepend ? prepend : extend)(extend({}, a[p]), val);\r\n    else if (!_prepend)\r\n      a[p] = val;\r\n  }\r\n}\r\n\r\nvar supportsPreload = false, supportsPrefetch = false;\r\nif (isBrowser)\r\n  (function () {\r\n    var relList = document.createElement('link').relList;\r\n    if (relList && relList.supports) {\r\n      supportsPrefetch = true;\r\n      try {\r\n        supportsPreload = relList.supports('preload');\r\n      }\r\n      catch (e) {}\r\n    }\r\n  })();\r\n\r\nexport function preloadScript (url) {\r\n  // fallback to old fashioned image technique which still works in safari\r\n  if (!supportsPreload && !supportsPrefetch) {\r\n    var preloadImage = new Image();\r\n    preloadImage.src = url;\r\n    return;\r\n  }\r\n\r\n  var link = document.createElement('link');\r\n  if (supportsPreload) {\r\n    link.rel = 'preload';\r\n    link.as = 'script';\r\n  }\r\n  else {\r\n    // this works for all except Safari (detected by relList.supports lacking)\r\n    link.rel = 'prefetch';\r\n  }\r\n  link.href = url;\r\n  document.head.appendChild(link);\r\n}\r\n\r\nfunction workerImport (src, resolve, reject) {\r\n  try {\r\n    importScripts(src);\r\n  }\r\n  catch (e) {\r\n    reject(e);\r\n  }\r\n  resolve();\r\n}\r\n\r\nif (isBrowser) {\r\n  var onerror = window.onerror;\r\n  window.onerror = function globalOnerror (msg, src) {\r\n    if (onerror)\r\n      onerror.apply(this, arguments);\r\n  };\r\n}\r\n\r\nexport function scriptLoad (src, crossOrigin, integrity, resolve, reject) {\r\n  // percent encode just \"#\" for HTTP requests\r\n  src = src.replace(/#/g, '%23');\r\n\r\n  // subresource integrity is not supported in web workers\r\n  if (isWorker)\r\n    return workerImport(src, resolve, reject);\r\n\r\n  var script = document.createElement('script');\r\n  script.type = 'text/javascript';\r\n  script.charset = 'utf-8';\r\n  script.async = true;\r\n\r\n  if (crossOrigin)\r\n    script.crossOrigin = crossOrigin;\r\n  if (integrity)\r\n    script.integrity = integrity;\r\n\r\n  script.addEventListener('load', load, false);\r\n  script.addEventListener('error', error, false);\r\n\r\n  script.src = src;\r\n  document.head.appendChild(script);\r\n\r\n  function load () {\r\n    resolve();\r\n    cleanup();\r\n  }\r\n\r\n  // note this does not catch execution errors\r\n  function error (err) {\r\n    cleanup();\r\n    reject(new Error('Fetching ' + src));\r\n  }\r\n\r\n  function cleanup () {\r\n    script.removeEventListener('load', load, false);\r\n    script.removeEventListener('error', error, false);\r\n    document.head.removeChild(script);\r\n  }\r\n}\r\n\r\nexport function readMemberExpression (p, value) {\r\n  var pParts = p.split('.');\r\n  while (pParts.length)\r\n    value = value[pParts.shift()];\r\n  return value;\r\n}\r\n\r\n// separate out paths cache as a baseURL lock process\r\nexport function applyPaths (baseURL, paths, key) {\r\n  var mapMatch = getMapMatch(paths, key);\r\n  if (mapMatch) {\r\n    var target = paths[mapMatch] + key.substr(mapMatch.length);\r\n\r\n    var resolved = resolveIfNotPlain(target, baseURI);\r\n    if (resolved !== undefined)\r\n      return resolved;\r\n\r\n    return baseURL + target;\r\n  }\r\n  else if (key.indexOf(':') !== -1) {\r\n    return key;\r\n  }\r\n  else {\r\n    return baseURL + key;\r\n  }\r\n}\r\n\r\nfunction checkMap (p) {\r\n  var name = this.name;\r\n  // can add ':' here if we want paths to match the behaviour of map\r\n  if (name.substr(0, p.length) === p && (name.length === p.length || name[p.length] === '/' || p[p.length - 1] === '/' || p[p.length - 1] === ':')) {\r\n    var curLen = p.split('/').length;\r\n    if (curLen > this.len) {\r\n      this.match = p;\r\n      this.len = curLen;\r\n    }\r\n  }\r\n}\r\n\r\nexport function getMapMatch (map, name) {\r\n  if (Object.hasOwnProperty.call(map, name))\r\n    return name;\r\n\r\n  var bestMatch = {\r\n    name: name,\r\n    match: undefined,\r\n    len: 0\r\n  };\r\n\r\n  Object.keys(map).forEach(checkMap, bestMatch);\r\n\r\n  return bestMatch.match;\r\n}\r\n\r\n// RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\r\nexport var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'|`[^`\\\\]*(?:\\\\.[^`\\\\]*)*`)\\s*\\)/g\r\n","\r\nimport { isWindows, global, readMemberExpression, cjsRequireRegEx, noop } from './common.js';\r\n\r\nexport function setHelpers (loader) {\r\n  loader.set('@@cjs-helpers', loader.newModule({\r\n    requireResolve: requireResolve.bind(loader),\r\n    getPathVars: getPathVars\r\n  }));\r\n\r\n  loader.set('@@global-helpers', loader.newModule({\r\n    prepareGlobal: prepareGlobal\r\n  }));\r\n}\r\n\r\nexport function setAmdHelper (loader) {\r\n\r\n  /*\r\n    AMD-compatible require\r\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\r\n  */\r\n  function require (names, callback, errback, referer) {\r\n    // in amd, first arg can be a config object... we just ignore\r\n    if (typeof names === 'object' && !(names instanceof Array))\r\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\r\n\r\n    // amd require\r\n    if (typeof names === 'string' && typeof callback === 'function')\r\n      names = [names];\r\n    if (names instanceof Array) {\r\n      var dynamicRequires = [];\r\n      for (var i = 0; i < names.length; i++)\r\n        dynamicRequires.push(loader.import(names[i], referer));\r\n      Promise.all(dynamicRequires).then(function (modules) {\r\n        if (callback)\r\n          callback.apply(null, modules);\r\n      }, errback);\r\n    }\r\n\r\n    // commonjs require\r\n    else if (typeof names === 'string') {\r\n      var normalized = loader.decanonicalize(names, referer);\r\n      var module = loader.get(normalized);\r\n      if (!module)\r\n        throw new Error('Module not already loaded loading \"' + names + '\" as ' + normalized + (referer ? ' from \"' + referer + '\".' : '.'));\r\n      return '__useDefault' in module ? module.__useDefault : module;\r\n    }\r\n\r\n    else\r\n      throw new TypeError('Invalid require');\r\n  }\r\n\r\n  function define (name, deps, factory) {\r\n    if (typeof name !== 'string') {\r\n      factory = deps;\r\n      deps = name;\r\n      name = null;\r\n    }\r\n\r\n    if (!(deps instanceof Array)) {\r\n      factory = deps;\r\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\r\n    }\r\n\r\n    if (typeof factory !== 'function')\r\n      factory = (function (factory) {\r\n        return function() { return factory; }\r\n      })(factory);\r\n\r\n    if (!name) {\r\n      if (curMetaDeps) {\r\n        deps = deps.concat(curMetaDeps);\r\n        curMetaDeps = undefined;\r\n      }\r\n    }\r\n\r\n    // remove system dependencies\r\n    var requireIndex, exportsIndex, moduleIndex;\r\n\r\n    if ((requireIndex = deps.indexOf('require')) !== -1) {\r\n\r\n      deps.splice(requireIndex, 1);\r\n\r\n      // only trace cjs requires for non-named\r\n      // named defines assume the trace has already been done\r\n      if (!name)\r\n        deps = deps.concat(amdGetCJSDeps(factory.toString(), requireIndex));\r\n    }\r\n\r\n    if ((exportsIndex = deps.indexOf('exports')) !== -1)\r\n      deps.splice(exportsIndex, 1);\r\n\r\n    if ((moduleIndex = deps.indexOf('module')) !== -1)\r\n      deps.splice(moduleIndex, 1);\r\n\r\n    function execute (req, exports, module) {\r\n      var depValues = [];\r\n      for (var i = 0; i < deps.length; i++)\r\n        depValues.push(req(deps[i]));\r\n\r\n      module.uri = module.id;\r\n\r\n      module.config = noop;\r\n\r\n      // add back in system dependencies\r\n      if (moduleIndex !== -1)\r\n        depValues.splice(moduleIndex, 0, module);\r\n\r\n      if (exportsIndex !== -1)\r\n        depValues.splice(exportsIndex, 0, exports);\r\n\r\n      if (requireIndex !== -1) {\r\n        var contextualRequire = function (names, callback, errback) {\r\n          if (typeof names === 'string' && typeof callback !== 'function')\r\n            return req(names);\r\n          return require.call(loader, names, callback, errback, module.id);\r\n        };\r\n        contextualRequire.toUrl = function (name) {\r\n          return loader.normalizeSync(name, module.id);\r\n        };\r\n        depValues.splice(requireIndex, 0, contextualRequire);\r\n      }\r\n\r\n      // set global require to AMD require\r\n      var curRequire = global.require;\r\n      global.require = require;\r\n\r\n      var output = factory.apply(exportsIndex === -1 ? global : exports, depValues);\r\n\r\n      global.require = curRequire;\r\n\r\n      if (typeof output !== 'undefined')\r\n        module.exports = output;\r\n    }\r\n\r\n    // anonymous define\r\n    if (!name) {\r\n      loader.registerDynamic(deps, false, curEsModule ? wrapEsModuleExecute(execute) : execute);\r\n    }\r\n    else {\r\n      loader.registerDynamic(name, deps, false, execute);\r\n\r\n      // if we don't have any other defines,\r\n      // then let this be an anonymous define\r\n      // this is just to support single modules of the form:\r\n      // define('jquery')\r\n      // still loading anonymously\r\n      // because it is done widely enough to be useful\r\n      // as soon as there is more than one define, this gets removed though\r\n      if (lastNamedDefine) {\r\n        lastNamedDefine = undefined;\r\n        multipleNamedDefines = true;\r\n      }\r\n      else if (!multipleNamedDefines) {\r\n        lastNamedDefine = [deps, execute];\r\n      }\r\n    }\r\n  }\r\n  define.amd = {};\r\n\r\n  loader.amdDefine = define;\r\n  loader.amdRequire = require;\r\n}\r\n\r\n// CJS\r\nvar windowOrigin;\r\nif (typeof window !== 'undefined' && typeof document !== 'undefined' && window.location)\r\n  windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\r\n\r\nfunction stripOrigin(path) {\r\n  if (path.substr(0, 8) === 'file:///')\r\n    return path.substr(7 + !!isWindows);\r\n\r\n  if (windowOrigin && path.substr(0, windowOrigin.length) === windowOrigin)\r\n    return path.substr(windowOrigin.length);\r\n\r\n  return path;\r\n}\r\n\r\nexport function requireResolve (request, parentId) {\r\n  return stripOrigin(this.normalizeSync(request, parentId));\r\n}\r\n\r\nexport function getPathVars (moduleId) {\r\n  // remove any plugin syntax\r\n  var pluginIndex = moduleId.lastIndexOf('!');\r\n  var filename;\r\n  if (pluginIndex !== -1)\r\n    filename = moduleId.substr(0, pluginIndex);\r\n  else\r\n    filename = moduleId;\r\n\r\n  var dirname = filename.split('/');\r\n  dirname.pop();\r\n  dirname = dirname.join('/');\r\n\r\n  return {\r\n    filename: stripOrigin(filename),\r\n    dirname: stripOrigin(dirname)\r\n  };\r\n}\r\n\r\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\r\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\r\n\r\n// used to support leading #!/usr/bin/env in scripts as supported in Node\r\nvar hashBangRegEx = /^\\#\\!.*/;\r\n\r\n// extract CJS dependencies from source text via regex static analysis\r\n// read require('x') statements not in comments or strings\r\nexport function getCJSDeps (source) {\r\n  cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\r\n\r\n  var deps = [];\r\n\r\n  var match;\r\n\r\n  // track string and comment locations for unminified source\r\n  var stringLocations = [], commentLocations = [];\r\n\r\n  function inLocation (locations, match) {\r\n    for (var i = 0; i < locations.length; i++)\r\n      if (locations[i][0] < match.index && locations[i][1] > match.index)\r\n        return true;\r\n    return false;\r\n  }\r\n\r\n  if (source.length / source.split('\\n').length < 200) {\r\n    while (match = stringRegEx.exec(source))\r\n      stringLocations.push([match.index, match.index + match[0].length]);\r\n\r\n    // TODO: track template literals here before comments\r\n\r\n    while (match = commentRegEx.exec(source)) {\r\n      // only track comments not starting in strings\r\n      if (!inLocation(stringLocations, match))\r\n        commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);\r\n    }\r\n  }\r\n\r\n  while (match = cjsRequireRegEx.exec(source)) {\r\n    // ensure we're not within a string or comment location\r\n    if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\r\n      var dep = match[1].substr(1, match[1].length - 2);\r\n      // skip cases like require('\" + file + \"')\r\n      if (dep.match(/\"|'/))\r\n        continue;\r\n      deps.push(dep);\r\n    }\r\n  }\r\n\r\n  return deps;\r\n}\r\n\r\n// Global\r\n// bare minimum ignores\r\nvar ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external',\r\n  'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\r\n\r\nvar globalSnapshot;\r\nexport function globalIterator (globalName) {\r\n  if (ignoredGlobalProps.indexOf(globalName) !== -1)\r\n    return;\r\n  try {\r\n    var value = global[globalName];\r\n  }\r\n  catch (e) {\r\n    ignoredGlobalProps.push(globalName);\r\n  }\r\n  this(globalName, value);\r\n}\r\n\r\nexport function getGlobalValue (exports) {\r\n  if (typeof exports === 'string')\r\n    return readMemberExpression(exports, global);\r\n\r\n  if (!(exports instanceof Array))\r\n    throw new Error('Global exports must be a string or array.');\r\n\r\n  var globalValue = {};\r\n  for (var i = 0; i < exports.length; i++)\r\n    globalValue[exports[i].split('.').pop()] = readMemberExpression(exports[i], global);\r\n  return globalValue;\r\n}\r\n\r\nexport function prepareGlobal (moduleName, exports, globals, encapsulate) {\r\n  // disable module detection\r\n  var curDefine = global.define;\r\n\r\n  global.define = undefined;\r\n\r\n  // set globals\r\n  var oldGlobals;\r\n  if (globals) {\r\n    oldGlobals = {};\r\n    for (var g in globals) {\r\n      oldGlobals[g] = global[g];\r\n      global[g] = globals[g];\r\n    }\r\n  }\r\n\r\n  // store a complete copy of the global object in order to detect changes\r\n  if (!exports) {\r\n    globalSnapshot = {};\r\n\r\n    Object.keys(global).forEach(globalIterator, function (name, value) {\r\n      globalSnapshot[name] = value;\r\n    });\r\n  }\r\n\r\n  // return function to retrieve global\r\n  return function () {\r\n    var globalValue = exports ? getGlobalValue(exports) : {};\r\n\r\n    var singleGlobal;\r\n    var multipleExports = !!exports;\r\n\r\n    if (!exports || encapsulate)\r\n      Object.keys(global).forEach(globalIterator, function (name, value) {\r\n        if (globalSnapshot[name] === value)\r\n          return;\r\n        if (value === undefined)\r\n          return;\r\n\r\n        // allow global encapsulation where globals are removed\r\n        if (encapsulate)\r\n          global[name] = undefined;\r\n\r\n        if (!exports) {\r\n          globalValue[name] = value;\r\n\r\n          if (singleGlobal !== undefined) {\r\n            if (!multipleExports && singleGlobal !== value)\r\n              multipleExports = true;\r\n          }\r\n          else {\r\n            singleGlobal = value;\r\n          }\r\n        }\r\n      });\r\n\r\n    globalValue = multipleExports ? globalValue : singleGlobal;\r\n\r\n    // revert globals\r\n    if (oldGlobals) {\r\n      for (var g in oldGlobals)\r\n        global[g] = oldGlobals[g];\r\n    }\r\n    global.define = curDefine;\r\n\r\n    return globalValue;\r\n  };\r\n}\r\n\r\n// AMD\r\nvar cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\r\nvar cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\r\nvar fnBracketRegEx = /\\(([^\\)]*)\\)/;\r\nvar wsRegEx = /^\\s+|\\s+$/g;\r\n\r\nvar requireRegExs = {};\r\n\r\nfunction amdGetCJSDeps(source, requireIndex) {\r\n\r\n  // remove comments\r\n  source = source.replace(commentRegEx, '');\r\n\r\n  // determine the require alias\r\n  var params = source.match(fnBracketRegEx);\r\n  var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\r\n\r\n  // find or generate the regex for this requireAlias\r\n  var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\r\n\r\n  requireRegEx.lastIndex = 0;\r\n\r\n  var deps = [];\r\n\r\n  var match;\r\n  while (match = requireRegEx.exec(source))\r\n    deps.push(match[2] || match[3]);\r\n\r\n  return deps;\r\n}\r\n\r\nfunction wrapEsModuleExecute (execute) {\r\n  return function (require, exports, module) {\r\n    execute(require, exports, module);\r\n    exports = module.exports;\r\n    if ((typeof exports === 'object' || typeof exports === 'function') && !('__esModule' in exports))\r\n      Object.defineProperty(module.exports, '__esModule', {\r\n        value: true\r\n      });\r\n  };\r\n}\r\n\r\n// generate anonymous define from singular named define\r\nvar multipleNamedDefines = false;\r\nvar lastNamedDefine;\r\nvar curMetaDeps;\r\nvar curEsModule = false;\r\nexport function clearLastDefine (metaDeps, esModule) {\r\n  curMetaDeps = metaDeps;\r\n  curEsModule = esModule;\r\n  lastNamedDefine = undefined;\r\n  multipleNamedDefines = false;\r\n}\r\nexport function registerLastDefine (loader) {\r\n  if (lastNamedDefine)\r\n    loader.registerDynamic(curMetaDeps ? lastNamedDefine[0].concat(curMetaDeps) : lastNamedDefine[0],\r\n        false, curEsModule ? wrapEsModuleExecute(lastNamedDefine[1]) : lastNamedDefine[1]);\r\n\r\n  // bundles are an empty module\r\n  else if (multipleNamedDefines)\r\n    loader.registerDynamic([], false, noop);\r\n}\r\n","import { ModuleNamespace } from 'es-module-loader/core/loader-polyfill.js';\r\nimport RegisterLoader from 'es-module-loader/core/register-loader.js';\r\nimport { global, baseURI, CONFIG, PLAIN_RESOLVE, PLAIN_RESOLVE_SYNC, resolveIfNotPlain, resolvedPromise,\r\n    extend, emptyModule, applyPaths, scriptLoad, getMapMatch, noop, preloadScript, isModule, isNode, isBrowser } from './common.js';\r\nimport { registerLastDefine, globalIterator, setAmdHelper } from './format-helpers.js';\r\n\r\nexport { ModuleNamespace }\r\n\r\nexport default SystemJSProductionLoader;\r\n\r\nfunction SystemJSProductionLoader () {\r\n  RegisterLoader.call(this);\r\n\r\n  // internal configuration\r\n  this[CONFIG] = {\r\n    baseURL: baseURI,\r\n    paths: {},\r\n    map: {},\r\n    submap: {},\r\n    depCache: {}\r\n  };\r\n\r\n  setAmdHelper(this);\r\n  if (isBrowser)\r\n    global.define = this.amdDefine;\r\n}\r\n\r\nSystemJSProductionLoader.plainResolve = PLAIN_RESOLVE;\r\nSystemJSProductionLoader.plainResolveSync = PLAIN_RESOLVE_SYNC;\r\n\r\nvar systemJSPrototype = SystemJSProductionLoader.prototype = Object.create(RegisterLoader.prototype);\r\n\r\nsystemJSPrototype.constructor = SystemJSProductionLoader;\r\n\r\nsystemJSPrototype[SystemJSProductionLoader.resolve = RegisterLoader.resolve] = function (key, parentKey) {\r\n  var resolved = resolveIfNotPlain(key, parentKey || baseURI);\r\n  if (resolved !== undefined)\r\n    return Promise.resolve(resolved);\r\n\r\n  // plain resolution\r\n  var loader = this;\r\n  return resolvedPromise\r\n  .then(function () {\r\n    return loader[PLAIN_RESOLVE](key, parentKey);\r\n  })\r\n  .then(function (resolved) {\r\n    resolved = resolved || key;\r\n    // if in the registry then we are done\r\n    if (loader.registry.has(resolved))\r\n      return resolved;\r\n\r\n    // then apply paths\r\n    // baseURL is fallback\r\n    var config = loader[CONFIG];\r\n    return applyPaths(config.baseURL, config.paths, resolved);\r\n  });\r\n};\r\n\r\nsystemJSPrototype.newModule = function (bindings) {\r\n  return new ModuleNamespace(bindings);\r\n};\r\n\r\nsystemJSPrototype.isModule = isModule;\r\n\r\nsystemJSPrototype.resolveSync = function (key, parentKey) {\r\n  var resolved = resolveIfNotPlain(key, parentKey || baseURI);\r\n  if (resolved !== undefined)\r\n    return resolved;\r\n\r\n  // plain resolution\r\n  resolved = this[PLAIN_RESOLVE_SYNC](key, parentKey) || key;\r\n\r\n  if (this.registry.has(resolved))\r\n    return resolved;\r\n\r\n  // then apply paths\r\n  var config = this[CONFIG];\r\n  return applyPaths(config.baseURL, config.paths, resolved);\r\n};\r\n\r\nsystemJSPrototype[PLAIN_RESOLVE] = systemJSPrototype[PLAIN_RESOLVE_SYNC] = plainResolve;\r\n\r\nsystemJSPrototype[SystemJSProductionLoader.instantiate = RegisterLoader.instantiate] = coreInstantiate;\r\n\r\nsystemJSPrototype.config = function (cfg) {\r\n  var config = this[CONFIG];\r\n\r\n  if (cfg.baseURL) {\r\n    config.baseURL = resolveIfNotPlain(cfg.baseURL, baseURI) || resolveIfNotPlain('./' + cfg.baseURL, baseURI);\r\n    if (config.baseURL[config.baseURL.length - 1] !== '/')\r\n      config.baseURL += '/';\r\n  }\r\n\r\n  if (cfg.paths)\r\n    extend(config.paths, cfg.paths);\r\n\r\n  if (cfg.map) {\r\n    var val = cfg.map;\r\n    for (var p in val) {\r\n      if (!Object.hasOwnProperty.call(val, p))\r\n        continue;\r\n\r\n      var v = val[p];\r\n\r\n      if (typeof v === 'string') {\r\n        config.map[p] = v;\r\n      }\r\n\r\n      // object submap\r\n      else {\r\n        // normalize parent with URL and paths only\r\n        var resolvedParent = resolveIfNotPlain(p, baseURI) || applyPaths(config.baseURL, config.paths, p);\r\n        extend(config.submap[resolvedParent] || (config.submap[resolvedParent] = {}), v);\r\n      }\r\n    }\r\n  }\r\n\r\n  config.wasm = cfg.wasm === true;\r\n\r\n  for (var p in cfg) {\r\n    if (!Object.hasOwnProperty.call(cfg, p))\r\n      continue;\r\n\r\n    var val = cfg[p];\r\n\r\n    switch (p) {\r\n      case 'baseURL':\r\n      case 'paths':\r\n      case 'map':\r\n      case 'wasm':\r\n      break;\r\n\r\n      case 'depCache':\r\n        for (var p in val) {\r\n          if (!Object.hasOwnProperty.call(val, p))\r\n            continue;\r\n          var resolvedParent = this.resolveSync(p, undefined);\r\n          config.depCache[resolvedParent] = (config.depCache[resolvedParent] || []).concat(val[p]);\r\n        }\r\n      break;\r\n\r\n      default:\r\n        throw new TypeError('The SystemJS production build does not support the \"' + p + '\" configuration option.');\r\n    }\r\n  }\r\n};\r\n\r\n// getConfig configuration cloning\r\nsystemJSPrototype.getConfig = function (name) {\r\n  var config = this[CONFIG];\r\n\r\n  var map = {};\r\n  extend(map, config.map);\r\n  for (var p in config.submap) {\r\n    if (!Object.hasOwnProperty.call(config.submap, p))\r\n      continue;\r\n    map[p] = extend({}, config.submap[p]);\r\n  }\r\n\r\n  var depCache = {};\r\n  for (var p in config.depCache) {\r\n    if (!Object.hasOwnProperty.call(config.depCache, p))\r\n      continue;\r\n    depCache[p] = [].concat(config.depCache[p]);\r\n  }\r\n\r\n  return {\r\n    baseURL: config.baseURL,\r\n    paths: extend({}, config.paths),\r\n    depCache: depCache,\r\n    map: map,\r\n    wasm: config.wasm === true\r\n  };\r\n};\r\n\r\n// ensure System.register and System.registerDynamic decanonicalize\r\nsystemJSPrototype.register = function (key, deps, declare) {\r\n  if (typeof key === 'string')\r\n    key = this.resolveSync(key, undefined);\r\n  return RegisterLoader.prototype.register.call(this, key, deps, declare);\r\n};\r\n\r\nsystemJSPrototype.registerDynamic = function (key, deps, executingRequire, execute) {\r\n  if (typeof key === 'string')\r\n    key = this.resolveSync(key, undefined);\r\n  return RegisterLoader.prototype.registerDynamic.call(this, key, deps, executingRequire, execute);\r\n};\r\n\r\nfunction plainResolve (key, parentKey) {\r\n  var config = this[CONFIG];\r\n\r\n  // Apply contextual submap\r\n  if (parentKey) {\r\n    var parent = getMapMatch(config.submap, parentKey);\r\n    var submap = config.submap[parent];\r\n    var mapMatch = submap && getMapMatch(submap, key);\r\n\r\n    if (mapMatch) {\r\n      var target = submap[mapMatch] + key.substr(mapMatch.length);\r\n      return resolveIfNotPlain(target, parent) || target;\r\n    }\r\n  }\r\n\r\n  // Apply global map\r\n  var map = config.map;\r\n  var mapMatch = getMapMatch(map, key);\r\n\r\n  if (mapMatch) {\r\n    var target = map[mapMatch] + key.substr(mapMatch.length);\r\n    return resolveIfNotPlain(target, parentKey || config.baseURL) || target;\r\n  }\r\n}\r\n\r\nfunction instantiateWasm (loader, response, processAnonRegister) {\r\n  return WebAssembly.compileStreaming(response).then(function (module) {\r\n    var deps = [];\r\n    var setters = [];\r\n    var importObj = {};\r\n\r\n    // we can only set imports if supported (eg early Safari doesnt support)\r\n    if (WebAssembly.Module.imports)\r\n      WebAssembly.Module.imports(module).forEach(function (i) {\r\n        var key = i.module;\r\n        setters.push(function (m) {\r\n          importObj[key] = m;\r\n        });\r\n        if (deps.indexOf(key) === -1)\r\n          deps.push(key);\r\n      });\r\n\r\n    loader.register(deps, function (_export) {\r\n      return {\r\n        setters: setters,\r\n        execute: function () {\r\n          _export(new WebAssembly.Instance(module, importObj).exports);\r\n        }\r\n      };\r\n    });\r\n    processAnonRegister();\r\n  });\r\n}\r\n\r\nfunction doScriptLoad (loader, url, processAnonRegister) {\r\n  // store a global snapshot in case it turns out to be global\r\n  globalSnapshot = {};\r\n  Object.keys(global).forEach(globalIterator, function (name, value) {\r\n    globalSnapshot[name] = value;\r\n  });\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    return scriptLoad(url, 'anonymous', undefined, function () {\r\n\r\n      // check for System.register call\r\n      var registered = processAnonRegister();\r\n      if (!registered) {\r\n        // no System.register -> support named AMD as anonymous\r\n        registerLastDefine(loader);\r\n        registered = processAnonRegister();\r\n\r\n        // still no registration -> attempt a global detection\r\n        if (!registered) {\r\n          loader.register([], function () {\r\n            return {\r\n              execute: retrieveGlobal\r\n            };\r\n          });\r\n          processAnonRegister();\r\n        }\r\n      }\r\n      resolve();\r\n    }, reject);\r\n  });\r\n}\r\n\r\nfunction doEvalLoad (loader, url, source, processAnonRegister) {\r\n  // store a global snapshot in case it turns out to be global\r\n  globalSnapshot = {};\r\n  Object.keys(global).forEach(globalIterator, function (name, value) {\r\n    globalSnapshot[name] = value;\r\n  });\r\n\r\n  (0, eval)(source + '\\n//# sourceURL=' + url);\r\n\r\n  // check for System.register call\r\n  var registered = processAnonRegister();\r\n  if (!registered) {\r\n    // no System.register -> support named AMD as anonymous\r\n    registerLastDefine(loader);\r\n    registered = processAnonRegister();\r\n\r\n    // still no registration -> attempt a global detection\r\n    if (!registered) {\r\n      loader.register([], function () {\r\n        return {\r\n          execute: retrieveGlobal\r\n        };\r\n      });\r\n      processAnonRegister();\r\n    }\r\n  }\r\n}\r\n\r\nvar globalSnapshot;\r\nfunction retrieveGlobal () {\r\n  var globalValue = { __esModule: true };\r\n  var singleGlobal;\r\n  var multipleExports = false;\r\n\r\n  Object.keys(global).forEach(globalIterator, function (name, value) {\r\n    if (globalSnapshot[name] === value)\r\n      return;\r\n    if (value === undefined)\r\n      return;\r\n\r\n    globalValue[name] = value;\r\n\r\n    if (singleGlobal !== undefined) {\r\n      if (!multipleExports && singleGlobal !== value)\r\n        multipleExports = true;\r\n    }\r\n    else {\r\n      singleGlobal = value;\r\n    }\r\n  });\r\n\r\n  // clear global snapshot\r\n  globalSnapshot = undefined;\r\n\r\n  return multipleExports ? globalValue : singleGlobal;\r\n}\r\n\r\nfunction coreInstantiate (key, processAnonRegister) {\r\n  var config = this[CONFIG];\r\n\r\n  var depCache = config.depCache[key];\r\n  if (depCache) {\r\n    for (var i = 0; i < depCache.length; i++)\r\n      this.resolve(depCache[i], key).then(preloadScript);\r\n  }\r\n\r\n  if (config.wasm) {\r\n    var loader = this;\r\n    return fetch(key)\r\n    .then(function (res) {\r\n      if (!res.ok)\r\n        throw new Error('Fetch error: ' + res.status + ' ' + res.statusText);\r\n      if (res.headers.get('content-type').indexOf('application/wasm') === -1) {\r\n        return res.text()\r\n        .then(function (source) {\r\n          doEvalLoad(loader, key, source, processAnonRegister);\r\n        });\r\n      }\r\n      return instantiateWasm(loader, res, processAnonRegister);\r\n    });\r\n  }\r\n\r\n  return doScriptLoad(this, key, processAnonRegister);\r\n}\r\n","import { global, isBrowser, isWorker } from './common.js';\r\nimport SystemJSProductionLoader from './systemjs-production-loader.js';\r\n\r\nSystemJSProductionLoader.prototype.version = VERSION;\r\n\r\nvar System = new SystemJSProductionLoader();\r\n\r\n// only set the global System on the global in browsers\r\nif (isBrowser || isWorker) {\r\n  global.SystemJS = System;\r\n\r\n  // dont override an existing System global\r\n  if (!global.System) {\r\n    global.System = System;\r\n  }\r\n  // rather just extend or set a System.register on the existing System global\r\n  else {\r\n    var register = global.System.register;\r\n    global.System.register = function () {\r\n      if (register)\r\n        register.apply(this, arguments);\r\n      System.register.apply(System, arguments);\r\n    };\r\n  }\r\n}\r\n\r\nif (typeof module !== 'undefined' && module.exports)\r\n  module.exports = System;\r\n"]}